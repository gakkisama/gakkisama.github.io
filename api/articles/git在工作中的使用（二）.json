{"title":"git在工作中的使用（二）","uid":"0037db2f20b465980cd5521f9576bbf4","slug":"git在工作中的使用（二）","date":"2020-05-16T12:47:15.000Z","updated":"2021-08-14T13:05:30.785Z","comments":true,"path":"api/articles/git在工作中的使用（二）.json","keywords":null,"cover":[],"content":"<h1 id=\"工作-git的使用2\"><a href=\"#工作-git的使用2\" class=\"headerlink\" title=\"工作 git的使用2\"></a>工作 git的使用2</h1><p><em>问题描述</em>：</p>\n<p>  现状：本地代码的commit版本为1，远程分支的代码版本为4；</p>\n<p>  操作：本地修改一些了一些文件（远程也有修改），想要提交到远程分支 </p>\n<p>​       —&gt; git 管理会提示有冲突，冲突不只是修改的有冲突的文件，还包括其他 2-4 commit 版本的代码 </p>\n<p>​       —&gt; 直接放弃了所有的不冲突文件的修改，并 push 到了远程分支【<strong>错误操作</strong>】</p>\n<img src=\"/img/assets_2019/image-20210426202853112.png\" alt=\"image-20210426202853112\" style=\"zoom:20%;\" />\n\n<p><em>解决思路</em>：</p>\n<p>  由于这次是多人在同一分支开发，为了使其他人使用时不受阻</p>\n<p>  只要能够将远程分支上的代码回退到 commit4 版本，那么就能够保证远程分支的代码正确</p>\n<p><em>解决方案1</em>：</p>\n<p><code>git log/reflog</code>  —&gt; 查看git操作记录，找到要回退的commit4 的<code>[commit id]</code></p>\n<p><code>git reset --hard [commit id]</code> —&gt; 将本地的代码版本切回想要的 commit 版本【<strong>这只是本地分支上的操作</strong>】</p>\n<p><code>git push origin HEAD --force</code> —&gt; 强制提交一次，之前的 commit5 就会从远程删除【<strong>不好的操作</strong>】</p>\n<p>解决方案1 —&gt; 当前方案的确可以让远程分支上的代码正确，</p>\n<p><em>但是但是但是</em>，其他开发者在 git pull 更新代码的时候，会提示本地代码版本提前于远程分支，然后拉不了最新的代码，</p>\n<p>只能让每个开发者都按照方案一操作一遍，以保持和远程版本的一致【<strong>bad idea</strong>】</p>\n<p><img src=\"/img/assets_2019/image-20210426203040200.png\" alt=\"image-20210426203040200\"></p>\n<p><em>基于解决方案1的补救方案</em>：</p>\n<p>  基于解决方案1，已知远程的分支代码是正确的，在master 上面拉一个新分支 —&gt; 合并当前分支 —&gt; 所有开发者切换到新分支 —&gt; 无痛继续开发</p>\n<p><em>解决方案2</em>：【没有尝试】</p>\n<p>通过<code>git revert</code>是【用一次新的commit来回滚之前的commit】</p>\n<p> <code>git log</code> # 得到你需要回退一次提交的commit id</p>\n<p> <code>git revert &lt;commit_id&gt;</code> # 撤销指定的版本，撤销也会作为一次提交进行保存</p>\n<p> <code>git commit -m &quot;.......&quot;</code></p>\n<p><code>git push</code></p>\n<p><em>解决方案3</em>：【没有尝试】</p>\n<img src=\"/img/assets_2019/image-20210426203219671.png\" alt=\"image-20210426203219671\" style=\"zoom:40%;\" />","feature":true,"text":"工作 git的使用2问题描述： 现状：本地代码的commit版本为1，远程分支的代码版本为4； 操作：本地修改一些了一些文件（远程也有修改），想要提交到远程分支 ​ —&gt; git 管理会提示有冲突，冲突不只是修改的有冲突的文件，还包括其他 2-4 commit 版本的代码 ...","link":"","photos":[],"count_time":{"symbolsCount":926,"symbolsTime":"1 mins."},"categories":[],"tags":[],"toc":"<ol class=\"toc\"><li class=\"toc-item toc-level-1\"><a class=\"toc-link\" href=\"#%E5%B7%A5%E4%BD%9C-git%E7%9A%84%E4%BD%BF%E7%94%A82\"><span class=\"toc-text\">工作 git的使用2</span></a></li></ol>","author":{"name":"杰瑞","slug":"blog-author","avatar":"https://gimg2.baidu.com/image_search/src=http%3A%2F%2Fc-ssl.duitang.com%2Fuploads%2Fitem%2F201902%2F23%2F20190223171921_ebiun.thumb.400_0.jpeg&refer=http%3A%2F%2Fc-ssl.duitang.com&app=2002&size=f9999,10000&q=a80&n=0&g=0n&fmt=jpeg?sec=1631535846&t=baad15e2bdfe3e96b75d7bfebfeccabf","link":"/","description":"人生可以热烈如一场拳击，也可以轻盈如一场游戏。这个回合输了，下个回合再起 <br /> @ <b>微信号：jeremyo_0</b>","socials":{"github":"","twitter":"","stackoverflow":"","wechat":"","qq":"","weibo":"","zhihu":"","csdn":"","juejin":"","customs":{}}},"mapped":true,"prev_post":{"title":"第一","uid":"a9b7024603776f675b28198eeac54b9b","slug":"1st","date":"2020-08-15T10:49:36.000Z","updated":"2021-08-14T12:18:43.800Z","comments":true,"path":"api/articles/1st.json","keywords":null,"cover":"https://pics1.baidu.com/feed/b3fb43166d224f4a3b44436e36f64a579922d1f0.jpeg?token=b9ce9f2510365289717da951dccc6b1b&s=1EF35994E22254BD361A58880300E09D","text":"","link":"","photos":[],"count_time":{"symbolsCount":0,"symbolsTime":"1 mins."},"categories":[],"tags":[],"author":{"name":"杰瑞","slug":"blog-author","avatar":"https://gimg2.baidu.com/image_search/src=http%3A%2F%2Fc-ssl.duitang.com%2Fuploads%2Fitem%2F201902%2F23%2F20190223171921_ebiun.thumb.400_0.jpeg&refer=http%3A%2F%2Fc-ssl.duitang.com&app=2002&size=f9999,10000&q=a80&n=0&g=0n&fmt=jpeg?sec=1631535846&t=baad15e2bdfe3e96b75d7bfebfeccabf","link":"/","description":"人生可以热烈如一场拳击，也可以轻盈如一场游戏。这个回合输了，下个回合再起 <br /> @ <b>微信号：jeremyo_0</b>","socials":{"github":"","twitter":"","stackoverflow":"","wechat":"","qq":"","weibo":"","zhihu":"","csdn":"","juejin":"","customs":{}}},"feature":true},"next_post":{}}